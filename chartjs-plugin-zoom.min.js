/*!
 * chartjs-plugin-zoom
 * http://chartjs.org/
 * Version: 0.4.0
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-plugin-zoom/blob/master/LICENSE.md
 */
!function t(e,n,o){function a(r,l){if(!n[r]){if(!e[r]){var u="function"==typeof require&&require;if(!l&&u)return u(r,!0);if(i)return i(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var m=n[r]={exports:{}};e[r][0].call(m.exports,function(t){var n=e[r][1][t];return a(n?n:t)},m,m.exports,t,e,n,o)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<o.length;r++)a(o[r]);return a}({1:[function(t,e,n){},{}],2:[function(t,e,n){function o(t,e){return void 0===t||"string"==typeof t&&t.indexOf(e)!==-1}function a(t,e,n,o){var a=t.chart.data.labels,i=t.minIndex,r=a.length-1,l=t.maxIndex,u=o.sensitivity,s=t.isHorizontal()?t.left+t.width/2:t.top+t.height/2,m=t.isHorizontal()?n.x:n.y;x.zoomCumulativeDelta=e>1?x.zoomCumulativeDelta+1:x.zoomCumulativeDelta-1,Math.abs(x.zoomCumulativeDelta)>u&&(x.zoomCumulativeDelta<0?(m<=s?i<=0?l=Math.min(r,l+1):i=Math.max(0,i-1):m>s&&(l>=r?i=Math.max(0,i-1):l=Math.min(r,l+1)),x.zoomCumulativeDelta=0):x.zoomCumulativeDelta>0&&(m<=s?i=i<l?i=Math.min(l,i+1):i:m>s&&(l=l>i?l=Math.max(i,l-1):l),x.zoomCumulativeDelta=0),t.options.ticks.min=a[i],t.options.ticks.max=a[l])}function i(t,e,n){var o,a,i=t.options;t.isHorizontal()?(o=t.right-t.left,a=(n.x-t.left)/o):(o=t.bottom-t.top,a=(n.y-t.top)/o);var r=1-a,l=o*(e-1),u=l*a,s=l*r;i.time.min=t.getValueForPixel(t.getPixelForValue(t.firstTick)+u),i.time.max=t.getValueForPixel(t.getPixelForValue(t.lastTick)-s)}function r(t,e,n){var o=t.max-t.min,a=o*(e-1),i=t.isHorizontal()?n.x:n.y,r=(t.getValueForPixel(i)-t.min)/o,l=1-r,u=a*r,s=a*l;t.options.ticks.min=t.min+u,t.options.ticks.max=t.max-s}function l(t,e,n,o){var a=z[t.options.type];a&&a(t,e,n,o)}function u(t,e,n){var a=t.chartArea;n||(n={x:(a.left+a.right)/2,y:(a.top+a.bottom)/2});var i=t.options.zoom;if(i&&g.getValueOrDefault(i.enabled,F.zoom.enabled)){var r=g.getValueOrDefault(t.options.zoom.mode,F.zoom.mode);i.sensitivity=g.getValueOrDefault(t.options.zoom.sensitivity,F.zoom.sensitivity),g.each(t.scales,function(t,a){t.isHorizontal()&&o(r,"x")?l(t,e,n,i):!t.isHorizontal()&&o(r,"y")&&l(t,e,n,i)}),t.update(0)}}function s(t,e,n){var o,a=t.chart.data.labels,i=a.length-1,r=Math.max(t.ticks.length-(t.options.gridLines.offsetGridLines?0:1),1),l=n.speed,u=t.minIndex,s=Math.round(t.width/(r*l));x.panCumulativeDelta+=e,u=x.panCumulativeDelta>s?Math.max(0,u-1):x.panCumulativeDelta<-s?Math.min(i-r+1,u+1):u,x.panCumulativeDelta=u!==t.minIndex?0:x.panCumulativeDelta,o=Math.min(i,u+r-1),t.options.ticks.min=a[u],t.options.ticks.max=a[o]}function m(t,e){var n=t.options;n.time.min=t.getValueForPixel(t.getPixelForValue(t.firstTick)-e),n.time.max=t.getValueForPixel(t.getPixelForValue(t.lastTick)-e)}function c(t,e){var n=t.options.ticks,o=t.start,a=t.end;n.reverse?(n.max=t.getValueForPixel(t.getPixelForValue(o)-e),n.min=t.getValueForPixel(t.getPixelForValue(a)-e)):(n.min=t.getValueForPixel(t.getPixelForValue(o)-e),n.max=t.getValueForPixel(t.getPixelForValue(a)-e))}function d(t,e,n){var o=D[t.options.type];o&&o(t,e,n)}function p(t,e,n){var a=t.options.pan;if(a&&g.getValueOrDefault(a.enabled,F.pan.enabled)){var i=g.getValueOrDefault(t.options.pan.mode,F.pan.mode);a.speed=g.getValueOrDefault(t.options.pan.speed,F.pan.speed),g.each(t.scales,function(t,r){t.isHorizontal()&&o(i,"x")&&0!==e?d(t,e,a):!t.isHorizontal()&&o(i,"y")&&0!==n&&d(t,n,a)}),t.update(0)}}function f(t){var e=t.scales;for(var n in e){var o=e[n];if(!o.isHorizontal())return o}}var v=t("hammerjs");v="function"==typeof v?v:window.Hammer;var h=t("chart.js");h="function"==typeof h?h:window.Chart;var g=h.helpers,x=h.Zoom=h.Zoom||{},z=x.zoomFunctions=x.zoomFunctions||{},D=x.panFunctions=x.panFunctions||{},F=x.defaults={pan:{enabled:!0,mode:"xy",speed:20,threshold:10},zoom:{enabled:!0,mode:"xy",sensitivity:3}};x.zoomFunctions.category=a,x.zoomFunctions.time=i,x.zoomFunctions.linear=r,x.zoomFunctions.logarithmic=r,x.panFunctions.category=s,x.panFunctions.time=m,x.panFunctions.linear=c,x.panFunctions.logarithmic=c,x.panCumulativeDelta=0,x.zoomCumulativeDelta=0;var y={afterInit:function(t){g.each(t.scales,function(t){t.originalOptions=JSON.parse(JSON.stringify(t.options))}),t.resetZoom=function(){g.each(t.scales,function(t,e){var n=t.options.time,o=t.options.ticks;n&&(delete n.min,delete n.max),o&&(delete o.min,delete o.max),t.options=g.configMerge(t.options,t.originalOptions)}),g.each(t.data.datasets,function(t,e){t._meta=null}),t.update()}},beforeInit:function(t){this.node=t.chart.ctx.canvas;var e=t.options,n=g.getValueOrDefault(e.pan?e.pan.threshold:void 0,x.defaults.pan.threshold);if(e.zoom&&e.zoom.drag)e.zoom.mode="x",this.node.addEventListener("mousedown",function(e){t._dragZoomStart=e}),this.node.addEventListener("mousemove",function(e){t._dragZoomStart&&(t._dragZoomEnd=e,t.update(0)),t.update(0)}),this.node.addEventListener("mouseup",function(e){if(t._dragZoomStart){var n=t.chartArea,o=f(t),a=t._dragZoomStart,i=a.target.getBoundingClientRect().left,r=Math.min(a.x,e.x)-i,l=Math.max(a.x,e.x)-i,s=l-r,m=n.right-n.left,c=1+(m-s)/m;s>0&&u(t,c,{x:s/2+r,y:(o.bottom-o.top)/2}),t._dragZoomStart=null,t._dragZoomEnd=null}});else{var o=function(e){var n=e.target.getBoundingClientRect(),o=e.clientX-n.left,a=e.clientY-n.top,i={x:o,y:a};e.deltaY<0?u(t,1.1,i):u(t,.909,i),e.preventDefault()};t._wheelHandler=o,this.node.addEventListener("wheel",o)}if(v){var a=new v.Manager(this.node);a.add(new v.Pinch),a.add(new v.Pan({threshold:n}));var i,r=function(e){var n=1/i*e.scale;u(t,n,e.center),i=e.scale};a.on("pinchstart",function(t){i=1}),a.on("pinch",r),a.on("pinchend",function(t){r(t),i=null,x.zoomCumulativeDelta=0});var l=null,s=null,m=function(e){if(null!==l&&null!==s){var n=e.deltaX-l,o=e.deltaY-s;l=e.deltaX,s=e.deltaY,p(t,n,o)}};a.on("panstart",function(t){l=0,s=0,m(t)}),a.on("panmove",m),a.on("panend",function(t){l=null,s=null,x.panCumulativeDelta=0}),t._mc=a}},beforeDatasetsDraw:function(t){var e=t.chart.ctx,n=t.chartArea;if(e.save(),e.beginPath(),t._dragZoomEnd){var o=f(t),a=t._dragZoomStart,i=t._dragZoomEnd,r=a.target.getBoundingClientRect().left,l=Math.min(a.x,i.x)-r,u=Math.max(a.x,i.x)-r,s=u-l;e.fillStyle="rgba(225,225,225,0.3)",e.lineWidth=5,e.fillRect(l,o.top,s,o.bottom-o.top)}e.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),e.clip()},afterDatasetsDraw:function(t){t.chart.ctx.restore()},destroy:function(t){this.node.removeEventListener("wheel",t._wheelHandler),this.node=null;var e=t._mc;e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"))}};e.exports=y,h.pluginService.register(y)},{"chart.js":1,hammerjs:1}]},{},[2]);